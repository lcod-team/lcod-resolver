schemaVersion = "2.0"
id = "lcod://tooling/resolver/internal/summarize-result@0.1.0"
version = "0.1.0"
kind = "function"
summary = "Aggregate resolver output into a dependency graph, integrity hash, and warning list."

[deps]
requires = [
  "lcod://impl/set@1",
  "lcod://tooling/value/is_array@0.1.0",
  "lcod://tooling/value/is_string_nonempty@0.1.0",
  "lcod://flow/if@1"
]

[inputs.resolverResult]
summary = "Resolver output containing the root dependency tree."
required = true
schema = """
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "description": "Resolver output containing the root dependency tree."
}"""

[inputs.warnings]
summary = "Optional warnings to merge with the resolver output."
required = false
schema = """
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "array",
  "items": { "type": "string" },
  "description": "Optional warnings to merge."
}"""

[outputs.dependencyGraph]
summary = "Resolved dependency graph for the root component."
schema = """
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "array",
  "description": "Resolved dependency graph for the root component."
}"""

[outputs.rootIntegrity]
summary = "Integrity hash of the root descriptor, when available."
schema = """
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": ["string", "null"],
  "description": "Integrity hash of the root descriptor, when available."
}"""

[outputs.warnings]
summary = "Aggregated warnings."
schema = """
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "array",
  "items": { "type": "string" },
  "description": "Aggregated warnings."
}"""

[tool]
name = "summarize_result"
description = "Merge resolver warnings and surface the dependency graph summary."
inputSchema = "schema/input.json"
outputSchema = "schema/output.json"
