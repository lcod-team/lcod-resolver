schemaVersion = "2.0"
id = "lcod://tooling/resolver/internal/normalize-dependency@0.1.0"
version = "0.1.0"
kind = "function"
summary = "Normalize a dependency entry and ensure it has a valid id."

[deps]
requires = [
  "lcod://tooling/value/default_object@0.1.0",
  "lcod://tooling/value/is_object@0.1.0",
  "lcod://tooling/value/is_string_nonempty@0.1.0",
  "lcod://core/object/merge@0.1.0",
  "lcod://flow/if@1",
  "lcod://impl/set@1"
]

[inputs.node]
summary = "Raw dependency entry."
required = true
schema = """
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "description": "Raw dependency entry to normalise."
}
"""

[outputs.entry]
summary = "Normalized dependency entry (null when invalid)."
schema = """
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": ["object", "null"],
  "description": "Normalized dependency entry."
}
"""

[outputs.valid]
summary = "Indicates whether the dependency contains a valid id."
schema = """
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "boolean",
  "description": "True when the dependency entry has a valid id."
}
"""
